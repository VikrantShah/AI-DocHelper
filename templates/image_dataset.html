{% extends 'default_p.html' %}
{% block title %}
    {{ title }} Detection -
{% endblock title %}

{% block css %}
    <style>
        .image-preview {
            width: 100%;
            min-height: 100px;
            border : 2px solid #D9E2EC;
            margin-top: 15px;
            
            /* Default text setting */
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #D9E2EC;
        }

        .image-preview__image {
            display: none;
            width: 100%;
        }
    </style>
{% endblock css %}

{% block content %}

    <br>
    <h1>
        <b>
            {{ title }} DETECTION
        </b>
    </h1>

<main class="form-style-text">
    <form method="POST" enctype="multipart/form-data">    
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="pname" name="pname" placeholder="Name">
            <label for="pname">Name</label>
        </div>
        <div class="form-floating mb-3">
            <input type="number" class="form-control" id="page" name="page" placeholder="Age">
            <label for="page">Age</label>
        </div>
        <div class="form-floating">
            <select class="form-select" id="pgender" aria-label="Floating label select example" name="pgender">
                <option selected>Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select>
            <label for="pgender">Gender</label>
        </div>
        <div class="form-floating mb-3">
            <input type="number" class="form-control" id="pphno" name="pphno" placeholder="Phone Number">
            <label for="pphno">Phone Number</label>
        </div>
        <div class="form-floating mb-3">
            <input type="email" class="form-control" id="pemail" name="pemail" placeholder="Email">
            <label for="pemail">Email</label>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="refer" name="refer" placeholder="Patient Was Referrenced By">
            <label for="refer">Patient Was Referrenced By</label>
        </div>



        <div class="input-group mb-3" >

            <input type="file"  class="form-control" id="file" name="file">
            <label class="input-group-text"  style=" background-color: #102A43;"for="file">Upload</label>
           
        </div>

        <div class="input-group mb-3 image-preview" id="imagePreview">
            <img class="image-preview__image" src="" alt="Image Preview">
            <span class="image-preview__default-text">Image Preview</span>
            
        </div>

        



        <div class="col-auto d-grid gap-2 col-6 mx-auto">
            <button type="submit" class="btn btn-dark mb-3">Submit</button>
        </div>
    </form>
</main>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    const inpFile = document.getElementById("file");
    const previewContainer = document.getElementById("imagePreview");
    const previewImage = previewContainer.querySelector(".image-preview__image");
    const previewDefaultText = previewContainer.querySelector(".image-preview__default-text"); 

    inpFile.addEventListener("change", function() {
        const file = this.files[0];

        if(file) {
            const reader = new FileReader();

            previewDefaultText.style.display = "none";
            previewImage.style.display = "block";

            reader.addEventListener("load", function() {
                // console.log(this);
                previewImage.setAttribute("src", this.result);
            });

            reader.readAsDataURL(file);
        }
        else {
            previewDefaultText.style.display = null;
            previewImage.style.display = null;
            previewImage.setAttribute("src", "");
        }
    });
</script>
    
{% endblock content %}